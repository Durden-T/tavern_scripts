{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template/src/auto-retry/SettingsPanel.vue?402d","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/auto-retry/SettingsPanel.vue?4107","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/auto-retry/settings.ts","src://tavern_helper_template/src/auto-retry/SettingsPanel.vue","webpack://tavern_helper_template/src/auto-retry/SettingsPanel.vue?6fa1","src://tavern_helper_template/src/auto-retry/retry-engine.ts","src://tavern_helper_template/util/common.ts","src://tavern_helper_template/src/auto-retry/interceptor.ts","src://tavern_helper_template/src/auto-retry/index.ts","src://tavern_helper_template/util/script.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=9651185c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6cc08a2c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=9651185c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsPanel.vue?vue&type=style&index=0&id=9651185c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.auto-retry-settings[data-v-9651185c]{margin-bottom:10px}.auto-retry-settings h4[data-v-9651185c]{margin:10px 0 5px 0;font-weight:bold}.auto-retry-settings .flex-container[data-v-9651185c]{margin-bottom:5px}.auto-retry-settings label[data-v-9651185c]{min-width:150px}.fallback-model-entry[data-v-9651185c]{padding:10px;margin:5px 0;border:1px solid var(--SmartThemeBorderColor);border-radius:5px}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/auto-retry/SettingsPanel.vue\"],\"names\":[],\"mappings\":\"AAqPA,sCACE,kBACF,CAEA,yCACE,mBAAoB,CACpB,gBACF,CAEA,sDACE,iBACF,CAEA,4CACE,eACF,CAEA,uCACE,YAAa,CACb,YAAa,CACb,6CAA8C,CAC9C,iBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"auto-retry-settings\\\">\\n    <div class=\\\"inline-drawer\\\">\\n      <div class=\\\"inline-drawer-toggle inline-drawer-header\\\">\\n        <b>Auto-Retry Settings</b>\\n        <div class=\\\"inline-drawer-icon fa-solid fa-circle-chevron-down down\\\"></div>\\n      </div>\\n      <div class=\\\"inline-drawer-content\\\">\\n        <div class=\\\"flex-container flexFlowColumn\\\">\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-enabled\\\" v-model=\\\"settings.enabled\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-enabled\\\">Enable Auto-Retry</label>\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Retry Configuration</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-max-retries\\\">Max Retries:</label>\\n            <input\\n              id=\\\"auto-retry-max-retries\\\"\\n              v-model.number=\\\"settings.maxRetries\\\"\\n              type=\\\"number\\\"\\n              min=\\\"1\\\"\\n              max=\\\"20\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-delay\\\">Retry Delay (ms):</label>\\n            <input\\n              id=\\\"auto-retry-delay\\\"\\n              v-model.number=\\\"settings.retryDelayMs\\\"\\n              type=\\\"number\\\"\\n              min=\\\"100\\\"\\n              max=\\\"60000\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-multiplier\\\">Delay Multiplier:</label>\\n            <input\\n              id=\\\"auto-retry-multiplier\\\"\\n              v-model.number=\\\"settings.retryDelayMultiplier\\\"\\n              type=\\\"number\\\"\\n              min=\\\"1\\\"\\n              max=\\\"5\\\"\\n              step=\\\"0.1\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Rate Limit (429) Configuration</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-rate-limit-delay\\\">Rate Limit Delay (ms):</label>\\n            <input\\n              id=\\\"auto-retry-rate-limit-delay\\\"\\n              v-model.number=\\\"settings.rateLimitDelayMs\\\"\\n              type=\\\"number\\\"\\n              min=\\\"1000\\\"\\n              max=\\\"300000\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-rate-limit-max\\\">Rate Limit Max Retries:</label>\\n            <input\\n              id=\\\"auto-retry-rate-limit-max\\\"\\n              v-model.number=\\\"settings.rateLimitMaxRetries\\\"\\n              type=\\\"number\\\"\\n              min=\\\"1\\\"\\n              max=\\\"10\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Timeout Configuration</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <label for=\\\"auto-retry-streaming-timeout\\\">Streaming Timeout (ms):</label>\\n            <input\\n              id=\\\"auto-retry-streaming-timeout\\\"\\n              v-model.number=\\\"settings.streamingTimeoutMs\\\"\\n              type=\\\"number\\\"\\n              min=\\\"5000\\\"\\n              max=\\\"300000\\\"\\n              class=\\\"text_pole\\\"\\n            />\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Content Validation</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-content-enabled\\\" v-model=\\\"settings.requiredContentEnabled\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-content-enabled\\\">Enable Content Validation</label>\\n          </div>\\n\\n          <div v-if=\\\"settings.requiredContentEnabled\\\" class=\\\"flex-container flexFlowColumn\\\">\\n            <div class=\\\"flex-container\\\">\\n              <label for=\\\"auto-retry-content-pattern\\\">Required Pattern:</label>\\n              <input\\n                id=\\\"auto-retry-content-pattern\\\"\\n                v-model=\\\"settings.requiredContentPattern\\\"\\n                type=\\\"text\\\"\\n                class=\\\"text_pole wide100p\\\"\\n                placeholder=\\\"e.g. ```json or regex pattern\\\"\\n              />\\n            </div>\\n            <div class=\\\"flex-container\\\">\\n              <input id=\\\"auto-retry-content-regex\\\" v-model=\\\"settings.requiredContentIsRegex\\\" type=\\\"checkbox\\\" />\\n              <label for=\\\"auto-retry-content-regex\\\">Use Regex</label>\\n            </div>\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Fallback Models</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-fallback-enabled\\\" v-model=\\\"settings.fallbackModelsEnabled\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-fallback-enabled\\\">Enable Fallback Models</label>\\n          </div>\\n\\n          <div v-if=\\\"settings.fallbackModelsEnabled\\\" class=\\\"flex-container flexFlowColumn\\\">\\n            <div v-for=\\\"(model, index) in settings.fallbackModels\\\" :key=\\\"index\\\" class=\\\"fallback-model-entry\\\">\\n              <div class=\\\"flex-container\\\">\\n                <label>API URL:</label>\\n                <input v-model=\\\"model.apiurl\\\" type=\\\"text\\\" class=\\\"text_pole wide100p\\\" />\\n              </div>\\n              <div class=\\\"flex-container\\\">\\n                <label>API Key:</label>\\n                <input v-model=\\\"model.key\\\" type=\\\"password\\\" class=\\\"text_pole wide100p\\\" />\\n              </div>\\n              <div class=\\\"flex-container\\\">\\n                <label>Model:</label>\\n                <input v-model=\\\"model.model\\\" type=\\\"text\\\" class=\\\"text_pole wide100p\\\" />\\n              </div>\\n              <div class=\\\"flex-container\\\">\\n                <label>Source:</label>\\n                <input v-model=\\\"model.source\\\" type=\\\"text\\\" class=\\\"text_pole\\\" placeholder=\\\"openai\\\" />\\n              </div>\\n              <input type=\\\"button\\\" class=\\\"menu_button\\\" value=\\\"Remove\\\" @click=\\\"removeFallbackModel(index)\\\" />\\n              <hr class=\\\"sysHR\\\" />\\n            </div>\\n            <input type=\\\"button\\\" class=\\\"menu_button\\\" value=\\\"Add Fallback Model\\\" @click=\\\"addFallbackModel\\\" />\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Generation ID Filter</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-filter-enabled\\\" v-model=\\\"settings.filterEnabled\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-filter-enabled\\\">Enable Filter</label>\\n          </div>\\n\\n          <div v-if=\\\"settings.filterEnabled\\\" class=\\\"flex-container flexFlowColumn\\\">\\n            <div class=\\\"flex-container\\\">\\n              <label for=\\\"auto-retry-filter-mode\\\">Filter Mode:</label>\\n              <select id=\\\"auto-retry-filter-mode\\\" v-model=\\\"settings.filterMode\\\" class=\\\"text_pole\\\">\\n                <option value=\\\"blacklist\\\">Blacklist (exclude listed)</option>\\n                <option value=\\\"whitelist\\\">Whitelist (only listed)</option>\\n              </select>\\n            </div>\\n            <div class=\\\"flex-container\\\">\\n              <label for=\\\"auto-retry-filter-ids\\\">Generation IDs (comma-separated):</label>\\n              <input\\n                id=\\\"auto-retry-filter-ids\\\"\\n                v-model=\\\"filterIdsString\\\"\\n                type=\\\"text\\\"\\n                class=\\\"text_pole wide100p\\\"\\n                placeholder=\\\"e.g. background-summary, auto-continue\\\"\\n              />\\n            </div>\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n\\n          <h4>Notifications</h4>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-toast-retry\\\" v-model=\\\"settings.showRetryToast\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-toast-retry\\\">Show Retry Toast</label>\\n          </div>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-toast-success\\\" v-model=\\\"settings.showSuccessToast\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-toast-success\\\">Show Success Toast</label>\\n          </div>\\n\\n          <div class=\\\"flex-container\\\">\\n            <input id=\\\"auto-retry-toast-failure\\\" v-model=\\\"settings.showFailureToast\\\" type=\\\"checkbox\\\" />\\n            <label for=\\\"auto-retry-toast-failure\\\">Show Failure Toast</label>\\n          </div>\\n\\n          <hr class=\\\"sysHR\\\" />\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { useSettingsStore } from './settings';\\n\\nconst store = useSettingsStore();\\nconst { settings } = storeToRefs(store);\\n\\nconst filterIdsString = computed({\\n  get: () => settings.value.filterGenerationIds.join(', '),\\n  set: (val: string) => {\\n    settings.value.filterGenerationIds = val\\n      .split(',')\\n      .map(s => s.trim())\\n      .filter(s => s.length > 0);\\n  },\\n});\\n\\nfunction addFallbackModel() {\\n  settings.value.fallbackModels.push({\\n    apiurl: '',\\n    key: '',\\n    model: '',\\n    source: 'openai',\\n  });\\n}\\n\\nfunction removeFallbackModel(index: number) {\\n  settings.value.fallbackModels.splice(index, 1);\\n}\\n</script>\\n\\n<style scoped>\\n.auto-retry-settings {\\n  margin-bottom: 10px;\\n}\\n\\n.auto-retry-settings h4 {\\n  margin: 10px 0 5px 0;\\n  font-weight: bold;\\n}\\n\\n.auto-retry-settings .flex-container {\\n  margin-bottom: 5px;\\n}\\n\\n.auto-retry-settings label {\\n  min-width: 150px;\\n}\\n\\n.fallback-model-entry {\\n  padding: 10px;\\n  margin: 5px 0;\\n  border: 1px solid var(--SmartThemeBorderColor);\\n  border-radius: 5px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","const FallbackModel = z.object({\n    apiurl: z.string(),\n    key: z.string(),\n    model: z.string(),\n    source: z.string().default('openai'),\n});\nconst Settings = z\n    .object({\n    enabled: z.boolean().default(true),\n    maxRetries: z.number().int().min(1).max(20).default(3),\n    retryDelayMs: z.number().int().min(100).max(60000).default(1000),\n    retryDelayMultiplier: z.number().min(1).max(5).default(1.5),\n    rateLimitDelayMs: z.number().int().min(1000).max(300000).default(30000),\n    rateLimitMaxRetries: z.number().int().min(1).max(10).default(5),\n    streamingTimeoutMs: z.number().int().min(5000).max(300000).default(30000),\n    requiredContentEnabled: z.boolean().default(false),\n    requiredContentPattern: z.string().default(''),\n    requiredContentIsRegex: z.boolean().default(false),\n    fallbackModelsEnabled: z.boolean().default(false),\n    fallbackModels: z.array(FallbackModel).default([]),\n    filterEnabled: z.boolean().default(false),\n    filterMode: z.enum(['whitelist', 'blacklist']).default('blacklist'),\n    filterGenerationIds: z.array(z.string()).default([]),\n    showRetryToast: z.boolean().default(true),\n    showSuccessToast: z.boolean().default(true),\n    showFailureToast: z.boolean().default(true),\n})\n    .prefault({});\nexport const useSettingsStore = defineStore('auto-retry-settings', () => {\n    const settings = ref(Settings.parse(getVariables({ type: 'script', script_id: getScriptId() })));\n    watchEffect(() => {\n        insertOrAssignVariables(klona(settings.value), { type: 'script', script_id: getScriptId() });\n    });\n    function toggle() {\n        settings.value.enabled = !settings.value.enabled;\n    }\n    return { settings, toggle };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, isRef as _isRef } from \"vue\";\nconst _hoisted_1 = { class: \"auto-retry-settings\" };\nconst _hoisted_2 = { class: \"inline-drawer\" };\nconst _hoisted_3 = { class: \"inline-drawer-content\" };\nconst _hoisted_4 = { class: \"flex-container flexFlowColumn\" };\nconst _hoisted_5 = { class: \"flex-container\" };\nconst _hoisted_6 = { class: \"flex-container\" };\nconst _hoisted_7 = { class: \"flex-container\" };\nconst _hoisted_8 = { class: \"flex-container\" };\nconst _hoisted_9 = { class: \"flex-container\" };\nconst _hoisted_10 = { class: \"flex-container\" };\nconst _hoisted_11 = { class: \"flex-container\" };\nconst _hoisted_12 = { class: \"flex-container\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"flex-container flexFlowColumn\"\n};\nconst _hoisted_14 = { class: \"flex-container\" };\nconst _hoisted_15 = { class: \"flex-container\" };\nconst _hoisted_16 = { class: \"flex-container\" };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"flex-container flexFlowColumn\"\n};\nconst _hoisted_18 = { class: \"flex-container\" };\nconst _hoisted_19 = [\"onUpdate:modelValue\"];\nconst _hoisted_20 = { class: \"flex-container\" };\nconst _hoisted_21 = [\"onUpdate:modelValue\"];\nconst _hoisted_22 = { class: \"flex-container\" };\nconst _hoisted_23 = [\"onUpdate:modelValue\"];\nconst _hoisted_24 = { class: \"flex-container\" };\nconst _hoisted_25 = [\"onUpdate:modelValue\"];\nconst _hoisted_26 = [\"onClick\"];\nconst _hoisted_27 = { class: \"flex-container\" };\nconst _hoisted_28 = {\n    key: 2,\n    class: \"flex-container flexFlowColumn\"\n};\nconst _hoisted_29 = { class: \"flex-container\" };\nconst _hoisted_30 = { class: \"flex-container\" };\nconst _hoisted_31 = { class: \"flex-container\" };\nconst _hoisted_32 = { class: \"flex-container\" };\nconst _hoisted_33 = { class: \"flex-container\" };\nimport { storeToRefs } from 'pinia';\nimport { useSettingsStore } from './settings';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsPanel',\n    setup(__props) {\n        const store = useSettingsStore();\n        const { settings } = storeToRefs(store);\n        const filterIdsString = computed({\n            get: () => settings.value.filterGenerationIds.join(', '),\n            set: (val) => {\n                settings.value.filterGenerationIds = val\n                    .split(',')\n                    .map(s => s.trim())\n                    .filter(s => s.length > 0);\n            },\n        });\n        function addFallbackModel() {\n            settings.value.fallbackModels.push({\n                apiurl: '',\n                key: '',\n                model: '',\n                source: 'openai',\n            });\n        }\n        function removeFallbackModel(index) {\n            settings.value.fallbackModels.splice(index, 1);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[55] || (_cache[55] = _createElementVNode(\"div\", { class: \"inline-drawer-toggle inline-drawer-header\" }, [\n                        _createElementVNode(\"b\", null, \"Auto-Retry Settings\"),\n                        _createElementVNode(\"div\", { class: \"inline-drawer-icon fa-solid fa-circle-chevron-down down\" })\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-enabled\",\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).enabled) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).enabled]\n                                ]),\n                                _cache[17] || (_cache[17] = _createElementVNode(\"label\", { for: \"auto-retry-enabled\" }, \"Enable Auto-Retry\", -1 /* CACHED */))\n                            ]),\n                            _cache[40] || (_cache[40] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[41] || (_cache[41] = _createElementVNode(\"h4\", null, \"Retry Configuration\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"label\", { for: \"auto-retry-max-retries\" }, \"Max Retries:\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-max-retries\",\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).maxRetries) = $event)),\n                                    type: \"number\",\n                                    min: \"1\",\n                                    max: \"20\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).maxRetries,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _cache[19] || (_cache[19] = _createElementVNode(\"label\", { for: \"auto-retry-delay\" }, \"Retry Delay (ms):\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-delay\",\n                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).retryDelayMs) = $event)),\n                                    type: \"number\",\n                                    min: \"100\",\n                                    max: \"60000\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).retryDelayMs,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _cache[20] || (_cache[20] = _createElementVNode(\"label\", { for: \"auto-retry-multiplier\" }, \"Delay Multiplier:\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-multiplier\",\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).retryDelayMultiplier) = $event)),\n                                    type: \"number\",\n                                    min: \"1\",\n                                    max: \"5\",\n                                    step: \"0.1\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).retryDelayMultiplier,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _cache[42] || (_cache[42] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[43] || (_cache[43] = _createElementVNode(\"h4\", null, \"Rate Limit (429) Configuration\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _cache[21] || (_cache[21] = _createElementVNode(\"label\", { for: \"auto-retry-rate-limit-delay\" }, \"Rate Limit Delay (ms):\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-rate-limit-delay\",\n                                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).rateLimitDelayMs) = $event)),\n                                    type: \"number\",\n                                    min: \"1000\",\n                                    max: \"300000\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).rateLimitDelayMs,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _cache[22] || (_cache[22] = _createElementVNode(\"label\", { for: \"auto-retry-rate-limit-max\" }, \"Rate Limit Max Retries:\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-rate-limit-max\",\n                                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).rateLimitMaxRetries) = $event)),\n                                    type: \"number\",\n                                    min: \"1\",\n                                    max: \"10\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).rateLimitMaxRetries,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _cache[44] || (_cache[44] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[45] || (_cache[45] = _createElementVNode(\"h4\", null, \"Timeout Configuration\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _cache[23] || (_cache[23] = _createElementVNode(\"label\", { for: \"auto-retry-streaming-timeout\" }, \"Streaming Timeout (ms):\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-streaming-timeout\",\n                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).streamingTimeoutMs) = $event)),\n                                    type: \"number\",\n                                    min: \"5000\",\n                                    max: \"300000\",\n                                    class: \"text_pole\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).streamingTimeoutMs,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ]),\n                            _cache[46] || (_cache[46] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[47] || (_cache[47] = _createElementVNode(\"h4\", null, \"Content Validation\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-content-enabled\",\n                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).requiredContentEnabled) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).requiredContentEnabled]\n                                ]),\n                                _cache[24] || (_cache[24] = _createElementVNode(\"label\", { for: \"auto-retry-content-enabled\" }, \"Enable Content Validation\", -1 /* CACHED */))\n                            ]),\n                            (_unref(settings).requiredContentEnabled)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _cache[25] || (_cache[25] = _createElementVNode(\"label\", { for: \"auto-retry-content-pattern\" }, \"Required Pattern:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            id: \"auto-retry-content-pattern\",\n                                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).requiredContentPattern) = $event)),\n                                            type: \"text\",\n                                            class: \"text_pole wide100p\",\n                                            placeholder: \"e.g. ```json or regex pattern\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(settings).requiredContentPattern]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_15, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            id: \"auto-retry-content-regex\",\n                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).requiredContentIsRegex) = $event)),\n                                            type: \"checkbox\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelCheckbox, _unref(settings).requiredContentIsRegex]\n                                        ]),\n                                        _cache[26] || (_cache[26] = _createElementVNode(\"label\", { for: \"auto-retry-content-regex\" }, \"Use Regex\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _cache[48] || (_cache[48] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[49] || (_cache[49] = _createElementVNode(\"h4\", null, \"Fallback Models\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-fallback-enabled\",\n                                    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(settings).fallbackModelsEnabled) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).fallbackModelsEnabled]\n                                ]),\n                                _cache[27] || (_cache[27] = _createElementVNode(\"label\", { for: \"auto-retry-fallback-enabled\" }, \"Enable Fallback Models\", -1 /* CACHED */))\n                            ]),\n                            (_unref(settings).fallbackModelsEnabled)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(settings).fallbackModels, (model, index) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: index,\n                                            class: \"fallback-model-entry\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_18, [\n                                                _cache[28] || (_cache[28] = _createElementVNode(\"label\", null, \"API URL:\", -1 /* CACHED */)),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((model.apiurl) = $event),\n                                                    type: \"text\",\n                                                    class: \"text_pole wide100p\"\n                                                }, null, 8 /* PROPS */, _hoisted_19), [\n                                                    [_vModelText, model.apiurl]\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_20, [\n                                                _cache[29] || (_cache[29] = _createElementVNode(\"label\", null, \"API Key:\", -1 /* CACHED */)),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((model.key) = $event),\n                                                    type: \"password\",\n                                                    class: \"text_pole wide100p\"\n                                                }, null, 8 /* PROPS */, _hoisted_21), [\n                                                    [_vModelText, model.key]\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_22, [\n                                                _cache[30] || (_cache[30] = _createElementVNode(\"label\", null, \"Model:\", -1 /* CACHED */)),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((model.model) = $event),\n                                                    type: \"text\",\n                                                    class: \"text_pole wide100p\"\n                                                }, null, 8 /* PROPS */, _hoisted_23), [\n                                                    [_vModelText, model.model]\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_24, [\n                                                _cache[31] || (_cache[31] = _createElementVNode(\"label\", null, \"Source:\", -1 /* CACHED */)),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((model.source) = $event),\n                                                    type: \"text\",\n                                                    class: \"text_pole\",\n                                                    placeholder: \"openai\"\n                                                }, null, 8 /* PROPS */, _hoisted_25), [\n                                                    [_vModelText, model.source]\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"input\", {\n                                                type: \"button\",\n                                                class: \"menu_button\",\n                                                value: \"Remove\",\n                                                onClick: ($event) => (removeFallbackModel(index))\n                                            }, null, 8 /* PROPS */, _hoisted_26),\n                                            _cache[32] || (_cache[32] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */))\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"button\",\n                                        class: \"menu_button\",\n                                        value: \"Add Fallback Model\",\n                                        onClick: addFallbackModel\n                                    })\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _cache[50] || (_cache[50] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[51] || (_cache[51] = _createElementVNode(\"h4\", null, \"Generation ID Filter\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-filter-enabled\",\n                                    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).filterEnabled) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).filterEnabled]\n                                ]),\n                                _cache[33] || (_cache[33] = _createElementVNode(\"label\", { for: \"auto-retry-filter-enabled\" }, \"Enable Filter\", -1 /* CACHED */))\n                            ]),\n                            (_unref(settings).filterEnabled)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                    _createElementVNode(\"div\", _hoisted_29, [\n                                        _cache[35] || (_cache[35] = _createElementVNode(\"label\", { for: \"auto-retry-filter-mode\" }, \"Filter Mode:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            id: \"auto-retry-filter-mode\",\n                                            \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((_unref(settings).filterMode) = $event)),\n                                            class: \"text_pole\"\n                                        }, [...(_cache[34] || (_cache[34] = [\n                                                _createElementVNode(\"option\", { value: \"blacklist\" }, \"Blacklist (exclude listed)\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"whitelist\" }, \"Whitelist (only listed)\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(settings).filterMode]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_30, [\n                                        _cache[36] || (_cache[36] = _createElementVNode(\"label\", { for: \"auto-retry-filter-ids\" }, \"Generation IDs (comma-separated):\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            id: \"auto-retry-filter-ids\",\n                                            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => (_isRef(filterIdsString) ? (filterIdsString).value = $event : null)),\n                                            type: \"text\",\n                                            class: \"text_pole wide100p\",\n                                            placeholder: \"e.g. background-summary, auto-continue\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(filterIdsString)]\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _cache[52] || (_cache[52] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */)),\n                            _cache[53] || (_cache[53] = _createElementVNode(\"h4\", null, \"Notifications\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-toast-retry\",\n                                    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((_unref(settings).showRetryToast) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).showRetryToast]\n                                ]),\n                                _cache[37] || (_cache[37] = _createElementVNode(\"label\", { for: \"auto-retry-toast-retry\" }, \"Show Retry Toast\", -1 /* CACHED */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_32, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-toast-success\",\n                                    \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event) => ((_unref(settings).showSuccessToast) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).showSuccessToast]\n                                ]),\n                                _cache[38] || (_cache[38] = _createElementVNode(\"label\", { for: \"auto-retry-toast-success\" }, \"Show Success Toast\", -1 /* CACHED */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"auto-retry-toast-failure\",\n                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((_unref(settings).showFailureToast) = $event)),\n                                    type: \"checkbox\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).showFailureToast]\n                                ]),\n                                _cache[39] || (_cache[39] = _createElementVNode(\"label\", { for: \"auto-retry-toast-failure\" }, \"Show Failure Toast\", -1 /* CACHED */))\n                            ]),\n                            _cache[54] || (_cache[54] = _createElementVNode(\"hr\", { class: \"sysHR\" }, null, -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsPanel.vue?vue&type=style&index=0&id=9651185c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9651185c\"]])\n\nexport default __exports__","import { uuidv4 } from '@util/common';\nimport type { FallbackModel, Settings } from './settings';\n\nexport type RetryableFunction<T> = () => Promise<T>;\n\nexport interface RetryContext {\n  generationId: string;\n  isStreaming: boolean;\n  config: GenerateConfig | GenerateRawConfig;\n  aborted: boolean;\n  lastTokenTime: number;\n  hasReceivedContent: boolean;\n  startTime: number;\n}\n\ninterface RetryResult<T> {\n  success: boolean;\n  result?: T;\n  error?: unknown;\n  attempts: number;\n  usedFallback: boolean;\n  fallbackModel?: FallbackModel;\n}\n\nconst activeContexts = new Map<string, RetryContext>();\n\nexport function getActiveContext(generationId: string): RetryContext | undefined {\n  return activeContexts.get(generationId);\n}\n\nexport function abortRetry(generationId: string): boolean {\n  const ctx = activeContexts.get(generationId);\n  if (ctx) {\n    ctx.aborted = true;\n    return true;\n  }\n  return false;\n}\n\nexport function updateTokenTime(generationId: string): void {\n  const ctx = activeContexts.get(generationId);\n  if (ctx) {\n    ctx.lastTokenTime = Date.now();\n    ctx.hasReceivedContent = true;\n  }\n}\n\nexport function isRateLimitError(error: unknown): boolean {\n  if (error instanceof Error) {\n    const msg = error.message.toLowerCase();\n    if (msg.includes('rate limit') || msg.includes('too many requests') || msg.includes('quota exceeded')) {\n      return true;\n    }\n  }\n  if (typeof error === 'object' && error !== null) {\n    const status = (error as Record<string, unknown>).status ?? (error as Record<string, unknown>).statusCode;\n    if (status === 429) return true;\n  }\n  return false;\n}\n\nexport function isRetryableError(error: unknown): boolean {\n  if (isRateLimitError(error)) return true;\n\n  if (error instanceof Error) {\n    const msg = error.message.toLowerCase();\n    if (\n      msg.includes('network') ||\n      msg.includes('fetch') ||\n      msg.includes('timeout') ||\n      msg.includes('connection refused') ||\n      msg.includes('connection reset') ||\n      msg.includes('econnrefused') ||\n      msg.includes('econnreset')\n    ) {\n      return true;\n    }\n  }\n\n  if (typeof error === 'object' && error !== null) {\n    const status = (error as Record<string, unknown>).status ?? (error as Record<string, unknown>).statusCode;\n    if (typeof status === 'number' && status >= 500 && status < 600) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction validateContent(content: string, settings: Settings): boolean {\n  if (!settings.requiredContentEnabled || !settings.requiredContentPattern) {\n    return true;\n  }\n\n  if (settings.requiredContentIsRegex) {\n    try {\n      const regex = new RegExp(settings.requiredContentPattern);\n      return regex.test(content);\n    } catch {\n      console.warn('[auto-retry] Invalid regex pattern:', settings.requiredContentPattern);\n      return true;\n    }\n  }\n\n  return content.includes(settings.requiredContentPattern);\n}\n\nfunction calculateDelay(attempt: number, settings: Settings, isRateLimit: boolean): number {\n  if (isRateLimit) {\n    return settings.rateLimitDelayMs;\n  }\n  return settings.retryDelayMs * Math.pow(settings.retryDelayMultiplier, attempt - 1);\n}\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction shouldRetryGeneration(generationId: string, settings: Settings): boolean {\n  if (!settings.filterEnabled) return true;\n\n  const isInList = settings.filterGenerationIds.includes(generationId);\n\n  if (settings.filterMode === 'whitelist') {\n    return isInList;\n  }\n  return !isInList;\n}\n\nexport async function executeWithRetry<T>(\n  fn: RetryableFunction<T>,\n  config: GenerateConfig | GenerateRawConfig,\n  settings: Settings,\n  originalGenerate: (config: GenerateConfig) => Promise<string>,\n  originalGenerateRaw: (config: GenerateRawConfig) => Promise<string>,\n  isRaw: boolean,\n): Promise<RetryResult<T>> {\n  const generationId = config.generation_id ?? uuidv4();\n  const isStreaming = config.should_stream ?? false;\n\n  if (!shouldRetryGeneration(generationId, settings)) {\n    try {\n      const result = await fn();\n      return { success: true, result, attempts: 1, usedFallback: false };\n    } catch (error) {\n      return { success: false, error, attempts: 1, usedFallback: false };\n    }\n  }\n\n  const ctx: RetryContext = {\n    generationId,\n    isStreaming,\n    config,\n    aborted: false,\n    lastTokenTime: Date.now(),\n    hasReceivedContent: false,\n    startTime: Date.now(),\n  };\n\n  activeContexts.set(generationId, ctx);\n\n  try {\n    const result = await executeRetryLoop(fn, config, settings, ctx, originalGenerate, originalGenerateRaw, isRaw);\n    return result;\n  } finally {\n    activeContexts.delete(generationId);\n  }\n}\n\nasync function executeRetryLoop<T>(\n  fn: RetryableFunction<T>,\n  config: GenerateConfig | GenerateRawConfig,\n  settings: Settings,\n  ctx: RetryContext,\n  originalGenerate: (config: GenerateConfig) => Promise<string>,\n  originalGenerateRaw: (config: GenerateRawConfig) => Promise<string>,\n  isRaw: boolean,\n): Promise<RetryResult<T>> {\n  let attempt = 0;\n  let lastError: unknown;\n  let currentConfig = config;\n  let currentFn = fn;\n  let usedFallback = false;\n  let currentFallbackModel: FallbackModel | undefined;\n  let fallbackIndex = -1;\n\n  const maxRetries = settings.maxRetries;\n\n  while (attempt < maxRetries) {\n    if (ctx.aborted) {\n      return { success: false, error: new Error('Aborted by user'), attempts: attempt, usedFallback };\n    }\n\n    attempt++;\n    ctx.lastTokenTime = Date.now();\n    ctx.hasReceivedContent = false;\n    ctx.startTime = Date.now();\n\n    if (settings.showRetryToast && attempt > 1) {\n      toastr.info(`Auto-retry: Attempt ${attempt}/${maxRetries}...`);\n    }\n\n    try {\n      const resultPromise = currentFn();\n      const result = await raceWithTimeouts(resultPromise, ctx, settings);\n\n      if (typeof result === 'string' && !validateContent(result, settings)) {\n        if (settings.showRetryToast) {\n          toastr.warning('Response missing required content. Retrying...');\n        }\n        lastError = new Error('Content validation failed');\n        await handleRetryDelay(attempt, settings, false);\n        continue;\n      }\n\n      if (settings.showSuccessToast && attempt > 1) {\n        toastr.success(`Auto-retry succeeded on attempt ${attempt}`);\n      }\n\n      return {\n        success: true,\n        result: result as T,\n        attempts: attempt,\n        usedFallback,\n        fallbackModel: currentFallbackModel,\n      };\n    } catch (error) {\n      lastError = error;\n      console.warn(`[auto-retry] Attempt ${attempt} failed:`, error);\n\n      if (ctx.aborted) {\n        return { success: false, error: new Error('Aborted by user'), attempts: attempt, usedFallback };\n      }\n\n      if (!isRetryableError(error)) {\n        break;\n      }\n\n      const isRateLimit = isRateLimitError(error);\n      const currentMaxRetries = isRateLimit ? settings.rateLimitMaxRetries : maxRetries;\n\n      if (attempt >= currentMaxRetries) {\n        break;\n      }\n\n      if (isRateLimit && settings.showRetryToast) {\n        const seconds = Math.round(settings.rateLimitDelayMs / 1000);\n        toastr.warning(`Rate limited. Waiting ${seconds}s...`);\n      }\n\n      await handleRetryDelay(attempt, settings, isRateLimit);\n    }\n  }\n\n  if (settings.fallbackModelsEnabled && settings.fallbackModels.length > 0) {\n    for (let i = 0; i < settings.fallbackModels.length; i++) {\n      const fallbackModel = settings.fallbackModels[i];\n\n      if (!fallbackModel.apiurl || !fallbackModel.model) {\n        console.warn(`[auto-retry] Skipping invalid fallback model at index ${i}`);\n        continue;\n      }\n\n      fallbackIndex = i;\n      usedFallback = true;\n      currentFallbackModel = fallbackModel;\n\n      if (settings.showRetryToast) {\n        toastr.info(`Trying fallback model: ${fallbackModel.model}...`);\n      }\n\n      const fallbackConfig: GenerateConfig = {\n        ...currentConfig,\n        custom_api: {\n          apiurl: fallbackModel.apiurl,\n          key: fallbackModel.key,\n          model: fallbackModel.model,\n          source: fallbackModel.source,\n        },\n      };\n\n      currentConfig = fallbackConfig;\n      currentFn = isRaw\n        ? () => originalGenerateRaw(fallbackConfig as GenerateRawConfig) as Promise<T>\n        : () => originalGenerate(fallbackConfig) as Promise<T>;\n\n      attempt = 0;\n\n      while (attempt < maxRetries) {\n        if (ctx.aborted) {\n          return {\n            success: false,\n            error: new Error('Aborted by user'),\n            attempts: attempt,\n            usedFallback,\n            fallbackModel: currentFallbackModel,\n          };\n        }\n\n        attempt++;\n        ctx.lastTokenTime = Date.now();\n        ctx.hasReceivedContent = false;\n        ctx.startTime = Date.now();\n\n        if (settings.showRetryToast && attempt > 1) {\n          toastr.info(`Auto-retry (fallback ${fallbackIndex + 1}): Attempt ${attempt}/${maxRetries}...`);\n        }\n\n        try {\n          const resultPromise = currentFn();\n          const result = await raceWithTimeouts(resultPromise, ctx, settings);\n\n          if (typeof result === 'string' && !validateContent(result, settings)) {\n            if (settings.showRetryToast) {\n              toastr.warning('Response missing required content. Retrying...');\n            }\n            lastError = new Error('Content validation failed');\n            await handleRetryDelay(attempt, settings, false);\n            continue;\n          }\n\n          if (settings.showSuccessToast) {\n            toastr.success(`Auto-retry succeeded with fallback model: ${fallbackModel.model}`);\n          }\n\n          return {\n            success: true,\n            result: result as T,\n            attempts: attempt,\n            usedFallback,\n            fallbackModel: currentFallbackModel,\n          };\n        } catch (error) {\n          lastError = error;\n          console.warn(`[auto-retry] Fallback ${fallbackIndex + 1} attempt ${attempt} failed:`, error);\n\n          if (ctx.aborted) {\n            return {\n              success: false,\n              error: new Error('Aborted by user'),\n              attempts: attempt,\n              usedFallback,\n              fallbackModel: currentFallbackModel,\n            };\n          }\n\n          if (!isRetryableError(error)) {\n            break;\n          }\n\n          if (attempt >= maxRetries) {\n            break;\n          }\n\n          await handleRetryDelay(attempt, settings, isRateLimitError(error));\n        }\n      }\n    }\n  }\n\n  if (settings.showFailureToast) {\n    toastr.error(`Auto-retry failed after all attempts`);\n  }\n\n  return { success: false, error: lastError, attempts: attempt, usedFallback, fallbackModel: currentFallbackModel };\n}\n\nasync function raceWithTimeouts<T>(promise: Promise<T>, ctx: RetryContext, settings: Settings): Promise<T> {\n  return new Promise<T>((resolve, reject) => {\n    let resolved = false;\n    let streamingCheckInterval: ReturnType<typeof setInterval> | undefined;\n\n    const cleanup = () => {\n      resolved = true;\n      if (streamingCheckInterval) clearInterval(streamingCheckInterval);\n    };\n\n    if (ctx.isStreaming) {\n      streamingCheckInterval = setInterval(() => {\n        if (resolved || ctx.aborted) {\n          cleanup();\n          return;\n        }\n\n        const timeSinceLastToken = Date.now() - ctx.lastTokenTime;\n        if (ctx.hasReceivedContent && timeSinceLastToken > settings.streamingTimeoutMs) {\n          cleanup();\n          stopGenerationById(ctx.generationId).catch(() => {});\n          if (settings.showRetryToast) {\n            toastr.warning('Streaming timeout. Retrying...');\n          }\n          reject(new Error('Streaming timeout'));\n        }\n      }, 1000);\n    }\n\n    promise\n      .then(result => {\n        if (!resolved) {\n          cleanup();\n          resolve(result);\n        }\n      })\n      .catch(error => {\n        if (!resolved) {\n          cleanup();\n          reject(error);\n        }\n      });\n  });\n}\n\nasync function handleRetryDelay(attempt: number, settings: Settings, isRateLimit: boolean): Promise<void> {\n  const delay = calculateDelay(attempt, settings, isRateLimit);\n  await sleep(delay);\n}\n","import { compare } from 'compare-versions';\nimport JSON5 from 'json5';\nimport { jsonrepair } from 'jsonrepair';\nimport { toDotPath } from 'zod/v4/core';\n\nexport function assignInplace<T>(destination: T[], new_array: T[]): T[] {\n  destination.length = 0;\n  destination.push(...new_array);\n  return destination;\n}\n\nexport function chunkBy<T>(array: T[], predicate: (lhs: T, rhs: T) => boolean): T[][] {\n  if (array.length === 0) {\n    return [];\n  }\n\n  const chunks: T[][] = [[array[0]]];\n  for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n    if (predicate(lhs!, rhs!)) {\n      chunks[chunks.length - 1].push(rhs!);\n    } else {\n      chunks.push([rhs!]);\n    }\n  }\n  return chunks;\n}\n\nexport function regexFromString(input: string): RegExp | null {\n  if (!input) {\n    return null;\n  }\n  try {\n    const match = input.match(/\\/(.+)\\/([a-z]*)/i);\n    if (!match) {\n      return new RegExp(_.escapeRegExp(input), 'i');\n    }\n    if (match[2] && !/^(?!.*?(.).*?\\1)[gmixXsuUAJ]+$/.test(match[3])) {\n      return new RegExp(input, 'i');\n    }\n    let flags = match[2] ?? '';\n    _.pull(flags, 'g');\n    if (flags.indexOf('i') === -1) {\n      flags = flags + 'i';\n    }\n    return new RegExp(match[1], flags);\n  } catch {\n    return null;\n  }\n}\n\nexport function uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport async function checkMinimumVersion(expected: string, title: string) {\n  if (compare(await getTavernHelperVersion(), expected, '<')) {\n    toastr.error(`'${title}'  >= '${expected}'`, '');\n  }\n}\n\nexport function prettifyErrorWithInput(error: z.ZodError) {\n  return _([...error.issues])\n    .sortBy(issue => issue.path?.length ?? 0)\n    .flatMap(issue => {\n      const lines = [` ${issue.message}`];\n      if (issue.path?.length) {\n        lines.push(`   : ${toDotPath(issue.path)}`);\n      }\n      if (issue.input !== undefined) {\n        lines.push(`   : ${JSON.stringify(issue.input)}`);\n      }\n      return lines;\n    })\n    .join('\\n');\n}\n\nexport function literalYamlify(value: any) {\n  return YAML.stringify(value, { blockQuote: 'literal' });\n}\n\nexport function parseString(content: string) {\n  let parsed: unknown;\n  try {\n    parsed = YAML.parseDocument(content, { merge: true }).toJS();\n  } catch (yaml_error) {\n    try {\n      // eslint-disable-next-line import-x/no-named-as-default-member\n      parsed = JSON5.parse(content);\n    } catch (json5_error) {\n      try {\n        parsed = JSON.parse(jsonrepair(content));\n      } catch (json_error) {\n        const toError = (error: unknown) => (error instanceof Error ? error.message : String(error));\n        throw new Error(\n          literalYamlify({\n            [' YAML/JSON ']: {\n              : content,\n              YAML: toError(yaml_error),\n              JSON5: toError(json5_error),\n              JSON: toError(json_error),\n            },\n          }),\n        );\n      }\n    }\n  }\n}\n","import { useSettingsStore } from './settings';\nimport { executeWithRetry, updateTokenTime, abortRetry, getActiveContext } from './retry-engine';\n\nlet originalGenerate: typeof generate | null = null;\nlet originalGenerateRaw: typeof generateRaw | null = null;\nlet streamingListener: EventOnReturn | null = null;\nlet generationStoppedListener: EventOnReturn | null = null;\nlet installed = false;\n\nexport function install(): void {\n  if (installed) return;\n\n  originalGenerate = generate;\n  originalGenerateRaw = generateRaw;\n\n  (window as unknown as { generate: typeof generate }).generate = wrappedGenerate;\n  (window as unknown as { generateRaw: typeof generateRaw }).generateRaw = wrappedGenerateRaw;\n\n  streamingListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (_text, generationId) => {\n    updateTokenTime(generationId);\n  });\n\n  generationStoppedListener = eventOn(tavern_events.GENERATION_STOPPED, () => {\n    // User manually stopped - we don't know which generation, so we stop all active retries\n  });\n\n  installed = true;\n  console.info('[auto-retry] Interceptor installed');\n}\n\nexport function uninstall(): void {\n  if (!installed) return;\n\n  if (originalGenerate) {\n    (window as unknown as { generate: typeof generate }).generate = originalGenerate;\n    originalGenerate = null;\n  }\n\n  if (originalGenerateRaw) {\n    (window as unknown as { generateRaw: typeof generateRaw }).generateRaw = originalGenerateRaw;\n    originalGenerateRaw = null;\n  }\n\n  if (streamingListener) {\n    streamingListener.stop();\n    streamingListener = null;\n  }\n\n  if (generationStoppedListener) {\n    generationStoppedListener.stop();\n    generationStoppedListener = null;\n  }\n\n  installed = false;\n  console.info('[auto-retry] Interceptor uninstalled');\n}\n\nasync function wrappedGenerate(config: GenerateConfig): Promise<string> {\n  const store = useSettingsStore();\n\n  if (!store.settings.enabled || !originalGenerate) {\n    return originalGenerate!(config);\n  }\n\n  const result = await executeWithRetry(\n    () => originalGenerate!(config),\n    config,\n    store.settings,\n    originalGenerate!,\n    originalGenerateRaw!,\n    false,\n  );\n\n  if (result.success) {\n    return result.result as string;\n  }\n\n  throw result.error;\n}\n\nasync function wrappedGenerateRaw(config: GenerateRawConfig): Promise<string> {\n  const store = useSettingsStore();\n\n  if (!store.settings.enabled || !originalGenerateRaw) {\n    return originalGenerateRaw!(config);\n  }\n\n  const result = await executeWithRetry(\n    () => originalGenerateRaw!(config),\n    config,\n    store.settings,\n    originalGenerate!,\n    originalGenerateRaw!,\n    true,\n  );\n\n  if (result.success) {\n    return result.result as string;\n  }\n\n  throw result.error;\n}\n\nexport function abortGenerationRetry(generationId: string): boolean {\n  return abortRetry(generationId);\n}\n\nexport function isRetrying(generationId: string): boolean {\n  return getActiveContext(generationId) !== undefined;\n}\n","import { createScriptIdDiv, teleportStyle } from '@util/script';\nimport SettingsPanel from './SettingsPanel.vue';\nimport { useSettingsStore } from './settings';\nimport { install, uninstall } from './interceptor';\n$(() => {\n    const pinia = createPinia();\n    const app = createApp(SettingsPanel).use(pinia);\n    const $app = createScriptIdDiv().appendTo('#extensions_settings2');\n    app.mount($app[0]);\n    const { destroy: destroyStyle } = teleportStyle();\n    const store = useSettingsStore(pinia);\n    install();\n    replaceScriptButtons([{ name: 'Toggle Auto-Retry', visible: true }]);\n    eventOn(getButtonEvent('Toggle Auto-Retry'), () => {\n        store.toggle();\n        if (store.settings.enabled) {\n            toastr.success('Auto-Retry Enabled');\n        }\n        else {\n            toastr.warning('Auto-Retry Disabled');\n        }\n    });\n    $(window).on('pagehide', () => {\n        uninstall();\n        app.unmount();\n        $app.remove();\n        destroyStyle();\n    });\n});\n","import iframe_srcdoc from './iframe_srcdoc.html';\n\nexport async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle(\n  append_to: JQuery.Selector | JQuery.htmlString | JQuery.TypeOrArray<Element | DocumentFragment> | JQuery = 'head',\n): { destroy: () => void } {\n  const $div = $(`<div>`)\n    .attr('script_id', getScriptId())\n    .append($(`head > style`, document).clone())\n    .appendTo(append_to);\n\n  return {\n    destroy: () => $div.remove(),\n  };\n}\n\nexport function createScriptIdIframe(): JQuery<HTMLIFrameElement> {\n  return $(`<iframe>`).attr({\n    script_id: getScriptId(),\n    frameborder: 0,\n    srcdoc: iframe_srcdoc,\n  }) as JQuery<HTMLIFrameElement>;\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function reloadOnChatChange(): EventOnReturn {\n  let chat_id = SillyTavern.getCurrentChatId();\n  return eventOn(tavern_events.CHAT_CHANGED, new_chat_id => {\n    if (chat_id !== new_chat_id) {\n      chat_id = new_chat_id;\n      window.location.reload();\n    }\n  });\n}\n"],"names":["content","__esModule","default","module","id","locals","exports","add","listToStyles","parentId","list","styles","newStyles","i","length","item","part","css","media","sourceMap","parts","push","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","join","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","sfc","props","target","__vccOpts","key","val","cssMapping","base64","data","concat","sourceMapping","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","___CSS_LOADER_EXPORT___","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Vue","z","FallbackModel","object","apiurl","string","model","source","Settings","enabled","boolean","maxRetries","number","int","min","max","retryDelayMs","retryDelayMultiplier","rateLimitDelayMs","rateLimitMaxRetries","streamingTimeoutMs","requiredContentEnabled","requiredContentPattern","requiredContentIsRegex","fallbackModelsEnabled","fallbackModels","array","filterEnabled","filterMode","enum","filterGenerationIds","showRetryToast","showSuccessToast","showFailureToast","prefault","useSettingsStore","settings","ref","parse","getVariables","script_id","getScriptId","watchEffect","insertOrAssignVariables","toggle","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","__name","setup","__props","store","filterIdsString","computed","set","split","s","trim","addFallbackModel","_ctx","_cache","$event","for","step","placeholder","onClick","splice","activeContexts","Map","isRateLimitError","error","msg","message","includes","status","statusCode","isRetryableError","validateContent","RegExp","console","warn","async","executeWithRetry","fn","config","originalGenerate","originalGenerateRaw","isRaw","generationId","generation_id","replace","c","Math","random","isStreaming","should_stream","isInList","shouldRetryGeneration","success","result","attempts","usedFallback","ctx","aborted","lastTokenTime","Date","now","hasReceivedContent","startTime","lastError","currentFallbackModel","attempt","currentConfig","currentFn","fallbackIndex","toastr","info","resultPromise","raceWithTimeouts","warning","handleRetryDelay","fallbackModel","isRateLimit","seconds","round","fallbackConfig","custom_api","executeRetryLoop","delete","promise","Promise","resolve","reject","streamingCheckInterval","resolved","cleanup","clearInterval","setInterval","timeSinceLastToken","stopGenerationById","catch","then","delay","pow","calculateDelay","ms","setTimeout","streamingListener","generationStoppedListener","installed","install","generate","generateRaw","window","wrappedGenerate","wrappedGenerateRaw","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_text","updateTokenTime","tavern_events","GENERATION_STOPPED","$","pinia","app","createApp","SettingsPanel","use","$app","attr","appendTo","mount","destroy","destroyStyle","append_to","$div","append","clone","teleportStyle","replaceScriptButtons","name","visible","getButtonEvent","on","stop","unmount"],"ignoreList":[],"sourceRoot":""}